{% load static %}
{% load icons_tag %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Barbershop:{{ title }}</title>
    <!-- шрифты -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet">
    <!-- шрифты -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- sdn иконок -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <!-- sdn иконок -->
    <link rel="stylesheet" href="{% static 'css/main.css' %} ">

    <!-- sdn календарь -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- /sdn календарь -->

    <!-- sdn телефон -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <link rel="stylesheet" href="path/to/intlTelInput.css">

    <!-- /sdn телефон -->

    <link rel="shortcut icon" href=" {% static 'img/favicon.png' %} " type="image/x-icon">
</head>
<body>
<div class="wrapper ">

    <header class="header">
        <div class="container">
            <div class="row py-2 d-flex text-center">


                <div class="col-12 col-lg mb-1 text-center text_color header_logo">{{ title }}</div>
                {% for post in posts %}
                <div class="col-12 col-lg mb-1 d-flex justify-content-center ">

                    <div class="mx-2  text_color">{{ post.title }}: {{ post.description }}</div>

                </div>
                {% endfor %}
            </div>
        </div>
        <hr>
    </header>
    <main class="main d-flex ">
        <div class="container d-flex flex-column justify-content-around  ">
            <div class="main_floor main_floor_1 fs-1 ">
                <h1>We provide haircuts for all hair types:</h1>
                <h2>Mexican, African American, and Puerto Rican.</h2>
            </div>
            <div class="main_floor main_floor_2  ">
                <div class="_img  ">
                    <img src="{% static 'img/logo_noname.jpeg' %}" alt="">
                </div>

            </div>
            <div class="main_floor main_floor_3 text-center">
                <button type="button" class="btn form__btn fs-1" data-bs-toggle="modal"
                        data-bs-target="#staticBackdrop">
                    Send a request
                </button>
            </div>
        </div>

    </main>


    <!-- ####################### MODAL ################################# -->
    <!-- Modal -->
    <div class="modal fade " id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content modal_set">
                <form method="post" lang="en">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Send a request</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        {% csrf_token %}
                        {{ form.as_p }}

                        <!--                        <button type="submit">Отправить</button>-->

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn form__btn_ch" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn form__btn_ch">Send</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- /####################### MODAL ################################# -->


    <footer class="footer m-xxl-0 mx-2 mt-4">
        <div class="container-fluid ">
            <hr>
            <div class="row">


                <div class="col-12 col-lg d-flex  justify-content-center">
                    <div class="my-2 text_color">© 2024 barbershop</div>

                </div>
                <div class="col-12 col-lg d-flex footer_image align-items-center justify-content-center  message">


                    {% get_social_icons %}


                </div>

            </div>
            <hr>
            <div class="">

            </div>
        </div>
    </footer>
    <div class="modal fade" tabindex="-1" id="loginModal_message">
        <div class="modal-dialog ">
            <div class="modal-content modal-dialog_message ">

                <div class="modal-body ">
                    {% for message in messages %}
                    <p class="text_color">{{ message }}</p>
                    {% endfor %}
                </div>

            </div>
        </div>
    </div>
</div>
<!--{% if messages %}-->
<!--{% for message in messages %}-->
<!--<script defer>-->
<!--    alert('{{ message }}');-->
<!--</script>-->
<!--{% endfor %}-->
<!--{% endif %}-->

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="{% static 'js/style.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
    flatpickr("#date", {
        disable: [
            function (date) {
                // Запрещаем выбор воскресений (0 - воскресенье)
                return date.getDay() === 0 || date <= new Date();
            }
        ],
        dateFormat: "Y-m-d", // Формат даты
        minDate: "today" // Устанавливаем минимальную дату на сегодня
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script>
    // Инициализация intl-tel-input
    const input = document.querySelector("#phone");
    window.intlTelInput(input, {
        initialCountry: "auto",
        geoIpLookup: function (callback) {
            fetch("https://ipinfo.io?token=YOUR_TOKEN_HERE") // Замените YOUR_TOKEN_HERE на ваш токен
                .then(response => response.json())
                .then(data => callback(data.country))
                .catch(() => callback("us")); // По умолчанию США
        },
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/lib/libphonenumber.js",
    });

    // Валидация ввода
    input.addEventListener('keypress', function (event) {
        const char = String.fromCharCode(event.which);
        if (!/[0-9+()-]/.test(char)) {
            event.preventDefault(); // Запретить ввод недопустимых символов
        }
    });

</script>


{% if messages %}

<script defer>
    $(document).ready(function () {
        $('#loginModal_message').modal('show');

        // Установите таймер на 1 секунду (1000 миллисекунд)
        setTimeout(function () {
            // Добавляем класс fade-out для начала анимации
            $('#loginModal_message').addClass('fade-out');

            // Ждем окончания анимации перед скрытием модального окна
            setTimeout(function () {
                $('#loginModal_message').modal('hide').removeClass('fade-out'); // Скрываем модальное окно и удаляем класс
            }, 500); // Должно совпадать с длительностью анимации
        }, 3000);
    });
</script>


{% endif %}


</body>
</html>



